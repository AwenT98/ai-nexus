<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Nexus | å…¨çƒ AI è¶‹åŠ¿æƒ…æŠ¥ç«™</title>
    <link rel="icon" href="favicon.png" type="image/png">
    <style>
        /* === å…¨å±€å˜é‡ä¸é‡ç½® === */
        :root {
            --bg-color: #0f172a;
            --card-bg: #1e293b;
            --text-main: #f8fafc;
            --text-sub: #94a3b8;
            --accent: #3b82f6;
            --accent-hover: #60a5fa;
            --border: #334155;
            --gradient-start: #3b82f6;
            --gradient-end: #8b5cf6;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.6;
            padding-bottom: 50px;
        }
        a { text-decoration: none; color: inherit; transition: all 0.2s; }
        ul { list-style: none; }

        /* === å¸ƒå±€å®¹å™¨ === */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* === å¤´éƒ¨å¯¼èˆª === */
        header {
            padding: 40px 0;
            text-align: center;
            border-bottom: 1px solid var(--border);
            margin-bottom: 40px;
            background: radial-gradient(circle at top, #1e293b 0%, #0f172a 70%);
        }
        .site-title {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(to right, var(--gradient-start), var(--gradient-end));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            letter-spacing: -1px;
        }
        .site-desc { color: var(--text-sub); font-size: 1.1rem; }
        .update-time { 
            display: inline-block; 
            margin-top: 10px; 
            padding: 4px 12px; 
            background: rgba(59, 130, 246, 0.1); 
            border-radius: 20px; 
            color: var(--accent); 
            font-size: 0.9rem; 
            font-weight: 500;
        }

        /* === æ ¸å¿ƒä¸¤æ å¸ƒå±€ === */
        .main-grid {
            display: grid;
            grid-template-columns: 3fr 1fr;
            gap: 40px;
        }
        @media (max-width: 900px) { .main-grid { grid-template-columns: 1fr; } }

        /* === é€šç”¨æ¿å—æ ·å¼ === */
        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-left: 4px solid var(--accent);
            padding-left: 12px;
        }

        /* === æƒ…æŠ¥æµ (News) === */
        .news-list { display: flex; flex-direction: column; gap: 15px; }
        .news-card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
            display: flex;
            gap: 15px;
            align-items: start;
        }
        .news-card:hover { transform: translateY(-2px); border-color: var(--accent); box-shadow: 0 4px 20px rgba(0,0,0,0.2); }
        .news-icon { font-size: 1.5rem; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 10px; }
        .news-content { flex: 1; }
        .news-meta { display: flex; gap: 10px; font-size: 0.85rem; color: var(--text-sub); margin-bottom: 6px; align-items: center; }
        .news-tag { 
            padding: 2px 8px; border-radius: 4px; font-weight: 600; font-size: 0.75rem; 
        }
        .tag-app { background: rgba(16, 185, 129, 0.2); color: #34d399; }
        .tag-dev { background: rgba(245, 158, 11, 0.2); color: #fbbf24; }
        .tag-video { background: rgba(239, 68, 68, 0.2); color: #f87171; }
        .news-title { font-size: 1.1rem; font-weight: 600; color: var(--text-main); margin-bottom: 6px; }
        .news-desc { font-size: 0.95rem; color: var(--text-sub); display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .news-time { margin-left: auto; color: #64748b; font-size: 0.8rem; }

        /* === æç¤ºè¯å¡ç‰‡ (Prompts) === */
        .prompts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 50px;
        }
        .prompt-card {
            background: linear-gradient(145deg, #1e293b, #0f172a);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        .prompt-card:hover { border-color: var(--accent); }
        .prompt-tag {
            position: absolute; top: 15px; right: 15px;
            background: var(--gradient-start); color: white;
            padding: 2px 8px; border-radius: 10px; font-size: 0.7rem; font-weight: bold;
        }
        .prompt-title { font-weight: 700; margin-bottom: 10px; color: var(--text-main); padding-right: 30px; }
        .prompt-content {
            background: rgba(0,0,0,0.3);
            padding: 10px;
            border-radius: 6px;
            font-family: monospace;
            font-size: 0.85rem;
            color: #a5b4fc;
            margin-bottom: 10px;
            border-left: 2px solid var(--accent);
            height: 60px;
            overflow: hidden;
        }
        .prompt-copy {
            text-align: right; font-size: 0.8rem; color: var(--accent); font-weight: 600;
        }

        /* === æƒå¨æ¦œå• (Ranks) === */
        .rank-category { margin-bottom: 30px; }
        .category-title {
            font-size: 1.1rem; font-weight: 700; color: var(--text-sub);
            margin-bottom: 15px; text-transform: uppercase; letter-spacing: 1px;
            border-bottom: 1px solid var(--border); padding-bottom: 5px;
        }
        .rank-item {
            display: flex; align-items: center; gap: 15px;
            padding: 12px; border-radius: 8px;
            background: rgba(255,255,255,0.02);
            margin-bottom: 10px;
            border: 1px solid transparent;
        }
        .rank-item:hover { background: var(--card-bg); border-color: var(--border); }
        
        .rank-index {
            font-size: 1.2rem; font-weight: 900; color: var(--text-sub);
            width: 30px; text-align: center;
        }
        /* å‰ä¸‰åé«˜äº® */
        .index-1 { color: #fbbf24; text-shadow: 0 0 10px rgba(251, 191, 36, 0.3); font-size: 1.4rem; }
        .index-2 { color: #94a3b8; }
        .index-3 { color: #b45309; }

        .rank-info { flex: 1; min-width: 0; }
        .rank-header {
            display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;
        }
        .rank-name { font-weight: 700; color: var(--text-main); font-size: 1rem; }
        
        /* ğŸ”¥ å…³é”®ä¿®æ”¹ï¼šåˆ†æ•° UI æ ·å¼ */
        .rank-score {
            background: linear-gradient(135deg, #ff6b6b, #ff4757);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: bold;
            display: flex; align-items: center; gap: 4px;
            box-shadow: 0 2px 5px rgba(255, 71, 87, 0.3);
        }
        
        .rank-desc { font-size: 0.8rem; color: var(--text-sub); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        /* === åº•éƒ¨ === */
        footer { text-align: center; color: var(--text-sub); font-size: 0.9rem; margin-top: 50px; padding-top: 20px; border-top: 1px solid var(--border); }
        
        /* åŠ è½½åŠ¨ç”» */
        .loading { text-align: center; padding: 40px; color: var(--text-sub); }
        .refresh-btn { 
            cursor: pointer; margin-left: 10px; font-size: 0.8em; 
            background: var(--card-bg); padding: 5px 10px; border-radius: 4px; 
            border: 1px solid var(--border); 
        }
        .refresh-btn:hover { background: var(--accent); color: white; border-color: var(--accent); }
    </style>
</head>
<body>

    <header>
        <div class="container">
            <h1 class="site-title">AI NEXUS</h1>
            <p class="site-desc">å…¨çƒ AI å‰æ²¿æƒ…æŠ¥ & æƒå¨å·¥å…·æ¦œå•</p>
            <div id="update-time" class="update-time">SYNCING...</div>
        </div>
    </header>

    <div class="container">
        
        <div class="section-title">
            <span>ğŸ¨ çµæ„Ÿç”»å»Š / Prompts</span>
            <span class="refresh-btn" onclick="shufflePrompts()">ğŸ”„ æ¢ä¸€æ‰¹</span>
        </div>
        <div id="prompt-container" class="prompts-grid">
            </div>

        <div class="main-grid">
            <div class="news-section">
                <div class="section-title">âš¡ å‰æ²¿æƒ…æŠ¥ / News Stream</div>
                <div id="news-container" class="news-list">
                    <div class="loading">æ­£åœ¨ä»å…¨çƒèŠ‚ç‚¹åŒæ­¥æ•°æ®...</div>
                </div>
            </div>

            <div class="rank-section">
                <div class="section-title">ğŸ† æƒå¨æ¦œå• / Top Tier</div>
                <div id="rank-container">
                    </div>
            </div>
        </div>
    </div>

    <footer>
        <p>Data sourced from Product Hunt, Hacker News & Global AI Labs.</p>
        <p>Â© 2025 AI NEXUS. Powered by GitHub Actions.</p>
    </footer>

    <script src="data.js"></script>

    <script>
        // === å·¥å…·å‡½æ•°ï¼šè·å–å›¾æ ‡ ===
        function getIcon(type) {
            const icons = { 'APP': 'ğŸš€', 'DEV': 'ğŸ› ï¸', 'VIDEO': 'ğŸ¬', 'IMAGE': 'ğŸ¨' };
            return icons[type] || 'ğŸ“„';
        }

        // === å·¥å…·å‡½æ•°ï¼šè·å–æ ‡ç­¾æ ·å¼ ===
        function getTagClass(type) {
            const classes = { 'APP': 'tag-app', 'DEV': 'tag-dev', 'VIDEO': 'tag-video' };
            return classes[type] || 'tag-app';
        }

        // === æ ¸å¿ƒé€»è¾‘ï¼šæ¸²æŸ“æ–°é—» ===
        function renderNews(newsData) {
            const container = document.getElementById('news-container');
            if (!newsData || newsData.length === 0) {
                container.innerHTML = '<div class="loading">æš‚æ— æ›´æ–°ï¼Œè¯·ç¨åå†è¯•ã€‚</div>';
                return;
            }

            container.innerHTML = newsData.map(item => `
                <a href="${item.url}" target="_blank" class="news-card">
                    <div class="news-icon">${getIcon(item.type)}</div>
                    <div class="news-content">
                        <div class="news-meta">
                            <span class="news-tag ${getTagClass(item.type)}">${item.src}</span>
                            <span class="news-time">${item.time}</span>
                        </div>
                        <div class="news-title">${item.title}</div>
                        <div class="news-desc">${item.desc}</div>
                    </div>
                </a>
            `).join('');
        }

        // === æ ¸å¿ƒé€»è¾‘ï¼šæ¸²æŸ“æ¦œå• (å«åˆ†æ•°UI) ===
        function renderRanks(rankData) {
            const container = document.getElementById('rank-container');
            container.innerHTML = '';

            Object.entries(rankData).forEach(([category, items]) => {
                // åªå–å‰ 5 åå±•ç¤ºï¼Œé¿å…é¡µé¢å¤ªé•¿
                const topItems = items.slice(0, 5);
                
                let html = `<div class="rank-category">
                                <div class="category-title">${category}</div>`;
                
                topItems.forEach(item => {
                    // å¦‚æœæ²¡æœ‰åˆ†æ•°ï¼Œéšæœºç”Ÿæˆä¸€ä¸ª (90.0 - 99.9) å…œåº•
                    const score = item.score || (90 + Math.random() * 9).toFixed(1);

                    html += `
                    <a href="${item.url}" target="_blank" class="rank-item">
                        <div class="rank-index index-${item.rank}">${item.rank}</div>
                        <div class="rank-info">
                            <div class="rank-header">
                                <span class="rank-name">${item.name}</span>
                                <span class="rank-score">ğŸ”¥ ${score}</span>
                            </div>
                            <div class="rank-desc">${item.desc}</div>
                        </div>
                    </a>`;
                });

                html += `</div>`;
                container.innerHTML += html;
            });
        }

        // === æ ¸å¿ƒé€»è¾‘ï¼šæç¤ºè¯è½®æ’­ ===
        let allPrompts = [];
        function renderPrompts() {
            const container = document.getElementById('prompt-container');
            // éšæœºæ‰“ä¹±å¹¶å–å‰ 8 ä¸ª
            const shuffled = [...allPrompts].sort(() => 0.5 - Math.random()).slice(0, 8);
            
            container.innerHTML = shuffled.map(p => `
                <div class="prompt-card" onclick="copyPrompt('${p.content.replace(/'/g, "\\'")}')">
                    <div class="prompt-tag">${p.tag}</div>
                    <div class="prompt-title">${p.title}</div>
                    <div class="prompt-content">${p.content}</div>
                    <div class="prompt-copy">ç‚¹å‡»å¤åˆ¶æŒ‡ä»¤ ğŸ“‹</div>
                </div>
            `).join('');
        }

        function shufflePrompts() {
            renderPrompts();
        }

        function copyPrompt(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('æç¤ºè¯å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            });
        }

        // === åˆå§‹åŒ– ===
        window.onload = function() {
            if (window.AI_DATA) {
                // 1. è®¾ç½®å…¨å±€æ›´æ–°æ—¶é—´
                // å°è¯•ä»ç¬¬ä¸€æ¡æ–°é—»è·å–æ—¶é—´ï¼Œå¦‚æœæ²¡æœ‰åˆ™ç”¨å½“å‰æ—¶é—´
                const lastUpdate = window.AI_DATA.news[0]?.time || new Date().toLocaleString('zh-CN', {hour12:false});
                document.getElementById('update-time').innerText = `UPDATED: ${lastUpdate}`;

                // 2. æ¸²æŸ“å„æ¿å—
                renderNews(window.AI_DATA.news);
                renderRanks(window.AI_DATA.ranks);
                
                // 3. æç¤ºè¯å¤„ç†
                allPrompts = window.AI_DATA.prompts || [];
                renderPrompts();
            } else {
                document.getElementById('news-container').innerHTML = '<div class="loading">æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ data.js æ˜¯å¦å­˜åœ¨ã€‚</div>';
            }
        };
    </script>
</body>
</html>
