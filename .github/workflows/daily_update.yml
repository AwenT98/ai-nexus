name: Auto AI News Update

# è§¦å‘æœºåˆ¶ï¼š
# 1. schedule: æ¯å¤©å›½é™…æ ‡å‡†æ—¶é—´ 00:00 (åŒ—äº¬æ—¶é—´æ—©ä¸Š 8:00) è‡ªåŠ¨è¿è¡Œ
# 2. workflow_dispatch: å…è®¸ä½ åœ¨ GitHub ç½‘é¡µä¸Šæ‰‹åŠ¨ç‚¹å‡»æŒ‰é’®ç«‹å³è¿è¡Œ
on:
  schedule:
    - cron: '0 0 * * *'
  workflow_dispatch:

# æƒé™è®¾ç½®ï¼šå…è®¸è¿™ä¸ªæœºå™¨äººä¿®æ”¹ä½ çš„ä»“åº“ä»£ç  (éå¸¸é‡è¦ï¼)
permissions:
  contents: write

jobs:
  build-and-update:
    runs-on: ubuntu-latest

    steps:
      # 1. æŠŠä½ çš„ä»£ç ä¸‹è½½åˆ°è™šæ‹ŸæœåŠ¡å™¨
      - name: Checkout code
        uses: actions/checkout@v3

      # 2. å®‰è£… Python ç¯å¢ƒ
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      # 3. å®‰è£… engine.py éœ€è¦çš„åº“
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install requests deep-translator

      # 4. è¿è¡Œä½ çš„æ ¸å¿ƒè„šæœ¬
      - name: Run Data Engine
        run: python engine.py

      # 5. æ£€æŸ¥æœ‰æ²¡æœ‰æ–°æ•°æ®ï¼Œå¦‚æœæœ‰ï¼Œå°±æäº¤ä¿å­˜
      - name: Commit and push changes
        run: |
          git config --global user.name "AI Nexus Bot"
          git config --global user.email "bot@github.com"
          git add data.js
          # åªæœ‰å½“ data.js çœŸçš„å˜äº†ï¼Œæ‰æäº¤ï¼Œå¦åˆ™å¿½ç•¥
          git commit -m "ğŸš€ Auto-update: Daily AI Intelligence" || echo "No changes to commit"
          git push
